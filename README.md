# üê± BarsikChat

–ó–∞—â–∏—â—ë–Ω–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä —Å **–ø–æ–ª–Ω—ã–º E2E-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º (Signal Protocol)**, –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∞–º–∏, –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è–º–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏, –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø—Ä–æ—Ñ–∏–ª—è–º–∏, push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏, –≥—Ä—É–ø–ø–æ–≤—ã–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º, –∫–æ–º–Ω–∞—Ç–∞–º–∏, —Ñ–∞–π–ª–∞–º–∏, –≥–æ–ª–æ—Å–æ–≤—ã–º–∏ –∏ –≤–∏–¥–µ–æ-–∫—Ä—É–∂–∫–∞–º–∏, –Ω–æ–≤–æ—Å—Ç–Ω–æ–π –ª–µ–Ω—Ç–æ–π –∏ –ø–∞–Ω–µ–ª—å—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

![Java 21](https://img.shields.io/badge/Java-21-orange) ![Spring Boot 3.3.5](https://img.shields.io/badge/Spring%20Boot-3.3.5-green) ![React 19](https://img.shields.io/badge/React-19-blue) ![PostgreSQL 16](https://img.shields.io/badge/PostgreSQL-16-336791) ![Docker](https://img.shields.io/badge/Docker-Compose-2496ED)

> **246 backend-—Ç–µ—Å—Ç–æ–≤ ¬∑ 327 frontend-—Ç–µ—Å—Ç–æ–≤ ¬∑ 45 test-—Ñ–∞–π–ª–æ–≤ ¬∑ 573 —Ç–µ—Å—Ç–∞ —Å—É–º–º–∞—Ä–Ω–æ**

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### E2E-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ (Signal Protocol)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è |
|---|---|
| –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–π | **X3DH** (Extended Triple Diffie-Hellman) |
| –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π | **Double Ratchet** —Å PFS –Ω–∞ –∫–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ |
| –ö—Ä–∏–≤–∞—è | ECDH P-256 + ECDSA P-256 |
| –°–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–π —à–∏—Ñ—Ä | **AES-256-GCM** (AEAD, 12-byte IV) |
| KDF | HKDF-SHA-256 |
| –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ | AES-256-GCM (–æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª—é—á –Ω–∞ —Ñ–∞–π–ª) |
| –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤—ã—Ö | AES-256-GCM (–æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª—é—á + —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ waveform) |
| –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ-–∫—Ä—É–∂–∫–æ–≤ | AES-256-GCM (–∫–ª—é—á–∏ –¥–ª—è –≤–∏–¥–µ–æ + thumbnail) |
| –ì—Ä—É–ø–ø—ã (E2E) | Shared **AES-256-GCM** key per room, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ pairwise Double Ratchet |
| –ú–µ–¥–∏–∞-–ø–æ—Ç–æ–∫–∏ (WebRTC) | **AES-128-GCM** per-frame —á–µ—Ä–µ–∑ Insertable Streams API |
| –ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ (WebRTC) | **AES-128-GCM** per-frame, pairwise –∫–ª—é—á–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ |
| –°–∏–≥–Ω–∞–ª–∏–Ω–≥ (WebRTC) | SDP/ICE —à–∏—Ñ—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ Double Ratchet |
| –•—Ä–∞–Ω–µ–Ω–∏–µ –∫–ª—é—á–µ–π | IndexedDB v4 (–∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è —Å—Ç–æ—Ä–æ–Ω–∞) |
| –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è | Safety Number (24-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥) |

- –°–µ—Ä–≤–µ—Ä **–Ω–µ –≤–∏–¥–∏—Ç** —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (`content: null`)
- E2E –≤–∫–ª—é—á–∞–µ—Ç—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –≤–æ –≤—Å–µ—Ö –ª–∏—á–Ω—ã—Ö —á–∞—Ç–∞—Ö
- E2E –≥—Ä—É–ø–ø—ã ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–π –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ –∫–æ–º–Ω–∞—Ç—É
- E2E –∑–≤–æ–Ω–∫–∏ ‚Äî —Å–∫–≤–æ–∑–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ —Ñ—Ä–µ–π–º–æ–≤ (Insertable Streams)
- E2E –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ ‚Äî pairwise —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–∏–∞-–ø–æ—Ç–æ–∫–æ–≤ –º–µ–∂–¥—É –∫–∞–∂–¥–æ–π –ø–∞—Ä–æ–π —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- E2E —Å–∏–≥–Ω–∞–ª–∏–Ω–≥ ‚Äî SDP/ICE-–∫–∞–Ω–¥–∏–¥–∞—Ç—ã —à–∏—Ñ—Ä—É—é—Ç—Å—è Double Ratchet
- 20 One-Time Pre-Keys —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∫–æ–¥–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- Retry-–ª–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–ª—é—á–µ–π (–¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫ —Å backoff)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è Signed Pre-Key –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏
- –ö—ç—à —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (IndexedDB, 30-–¥–Ω–µ–≤–Ω—ã–π TTL)

### TURN-—Å–µ—Ä–≤–µ—Ä (WebRTC NAT Traversal)

- –í—ã–¥–µ–ª–µ–Ω–Ω—ã–π **coturn** —Å–µ—Ä–≤–µ—Ä –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º VPS
- **HMAC-SHA1** ephemeral credentials (TURN REST API)
- Credentials TTL: 24 —á–∞—Å–∞, –∞–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–π —á–∞—Å
- TURN over TLS (TCP 443 fallback)
- STUN + TURN (UDP 3478 + TCP 443)

### –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- TLS 1.2 / 1.3 (ECDHE + AES-GCM, no session tickets)
- HSTS (2 –≥–æ–¥–∞, preload-ready)
- Let's Encrypt —Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º (certbot)
- OCSP Stapling

### –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

`Content-Security-Policy` ¬∑ `X-Content-Type-Options: nosniff` ¬∑ `X-Frame-Options: DENY` ¬∑ `Referrer-Policy` ¬∑ `Permissions-Policy` ¬∑ Server tokens –æ—Ç–∫–ª—é—á–µ–Ω—ã

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–≤—Ö–æ–¥ –ø–æ –ª–æ–≥–∏–Ω—É + –ø–∞—Ä–æ–ª—é
- –ü–∞—Ä–æ–ª–∏: **BCrypt** (cost 10)
- JWT (HMAC-SHA256, 24h TTL) —Å claim `role`
- –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å: `USER` / `ADMIN`
- Rate limiting: 10 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω –Ω–∞ `/api/auth/*` (per-IP)
- WebSocket: JWT-–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
- `/api/admin/**` –∑–∞—â–∏—â—ë–Ω `ROLE_ADMIN`

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üí¨ –ß–∞—Ç
- Real-time WebSocket-—á–∞—Ç
- üîê E2E-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –≤ –ª–∏—á–Ω—ã—Ö —á–∞—Ç–∞—Ö (Signal Protocol)
- üîê E2E-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –≤ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–∞—Ö (shared AES-256-GCM key)
- üè† –ö–æ–º–Ω–∞—Ç—ã: –æ–±—â–∏–π —á–∞—Ç, –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ, –≥—Ä—É–ø–ø–æ–≤—ã–µ
- üîó –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –ø–æ —Å—Å—ã–ª–∫–µ
- ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚Ü©Ô∏è –û—Ç–≤–µ—Ç—ã –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- @ –£–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚è∞ –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- üìä –°—Ç–∞—Ç—É—Å—ã –¥–æ—Å—Ç–∞–≤–∫–∏ / –ø—Ä–æ—á—Ç–µ–Ω–∏—è
- üü¢ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ–Ω–ª–∞–π–Ω / last seen
- ‚å®Ô∏è –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞ —Ç–µ–∫—Å—Ç–∞
- üîî Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Web Push API + VAPID)

### üìû –ó–≤–æ–Ω–∫–∏ (WebRTC)
- üé§ –ê—É–¥–∏–æ–∑–≤–æ–Ω–∫–∏ (1-–Ω–∞-1)
- üìπ –í–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏ (1-–Ω–∞-1)
- üë• –ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ ‚Äî –≥—Ä—É–ø–ø–æ–≤—ã–µ –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏ (–¥–æ 10 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)
- üîê E2E-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–∏–∞-–ø–æ—Ç–æ–∫–æ–≤ (AES-128-GCM, Insertable Streams)
- üîê E2E-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∏–Ω–≥–∞ (SDP/ICE —á–µ—Ä–µ–∑ Double Ratchet)
- STUN + TURN (NAT traversal, HMAC ephemeral credentials)
- üìã –ò—Å—Ç–æ—Ä–∏—è –∑–≤–æ–Ω–∫–æ–≤ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤ —á–∞—Ç–µ (CALL_LOG)
- üîî Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–∞—Ö
- UI: –≤—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫, —Ç–∞–π–º–µ—Ä, mute, –∫–∞–º–µ—Ä–∞ –≤–∫–ª/–≤—ã–∫–ª

### üë§ –ü—Ä–æ—Ñ–∏–ª–∏ –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã
- üìù –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è (–∏–º—è, —Ñ–∞–º–∏–ª–∏—è, —Ç–µ–ª–µ—Ñ–æ–Ω, –±–∏–æ, –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è, —Ü–≤–µ—Ç)
- üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª–µ–π –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∏–∑ —à–∞–ø–∫–∏ —á–∞—Ç–∞)
- ‚≠ê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ (–¥–æ–±–∞–≤–∏—Ç—å / —É–¥–∞–ª–∏—Ç—å)
- üö´ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∑–≤–æ–Ω–∫–∏)
- üñºÔ∏è –ê–≤–∞—Ç–∞—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üì± –ú–æ–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å–µ–∫—Ü–∏—è –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏

### üìé –§–∞–π–ª—ã –∏ –º–µ–¥–∏–∞
- –§–∞–π–ª—ã –¥–æ 100 –ú–ë (—Å E2E-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º)
- üé§ –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (—Å E2E-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º + waveform)
- üé• –í–∏–¥–µ–æ-–∫—Ä—É–∂–∫–∏ (—Å E2E-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º –≤–∏–¥–µ–æ + thumbnail)
- üòä Emoji Picker (160 —ç–º–æ–¥–∑–∏)

### üì∞ –ù–æ–≤–æ—Å—Ç–Ω–∞—è –ª–µ–Ω—Ç–∞
- –ü—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –Ω–æ–≤–æ—Å—Ç—è–º

### ‚úÖ –ó–∞–¥–∞—á–∏
- –ö–∞–Ω–±–∞–Ω-–¥–æ—Å–∫–∞
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–¥–∞—á–∞—Ö (—Å–æ–∑–¥–∞–Ω–Ω—ã–µ, –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ, –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ)

### üõ°Ô∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–Ω–ª–∞–π–Ω (real-time WebSocket)
- –í—Å–µ–≥–æ —á–∞—Ç–æ–≤ (–ª–∏—á–Ω—ã–µ + –≥—Ä—É–ø–ø–æ–≤—ã–µ)
- –ê–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Ç–æ–≤ –∑–∞ 24 —á–∞—Å–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∏—á–Ω—ã—Ö —á–∞—Ç–æ–≤ (1-1)
- –ê–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥

### üì± –î–∏–∑–∞–π–Ω
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–º–æ–±–∏–ª—å–Ω—ã–µ + –¥–µ—Å–∫—Ç–æ–ø)
- –¢—ë–º–Ω–∞—è —Ç–µ–º–∞
- PWA (Progressive Web App)
- –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π / –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îú‚îÄ‚îÄ backend/                     # Spring Boot 3.3.5 (Java 21)
‚îÇ   ‚îú‚îÄ‚îÄ controller/              # 15 –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ (REST + WebSocket)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminController          # GET /api/admin/stats
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthController           # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è / –ª–æ–≥–∏–Ω
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AvatarController         # –ó–∞–≥—Ä—É–∑–∫–∞ / –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CallLogController        # –ò—Å—Ç–æ—Ä–∏—è –∑–≤–æ–Ω–∫–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatController           # REST-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —á–∞—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatWebSocketHandler     # WebSocket real-time (—á–∞—Ç + –∑–≤–æ–Ω–∫–∏ + –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ConferenceController     # –°–æ–∑–¥–∞–Ω–∏–µ / –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è–º
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ContactBlockController   # –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FileController           # –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ KeyBundleController      # E2E –∫–ª—é—á–∏ (X3DH, 7 endpoints)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NewsController           # –ù–æ–≤–æ—Å—Ç–Ω–∞—è –ª–µ–Ω—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProfileController        # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PushController           # Web Push –ø–æ–¥–ø–∏—Å–∫–∏ (VAPID)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RoomController           # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TaskController           # –ó–∞–¥–∞—á–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WebRtcController         # ICE-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (TURN HMAC credentials)
‚îÇ   ‚îú‚îÄ‚îÄ service/                 # 10 —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminService             # –ê–≥—Ä–µ–≥–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatService              # –°–æ–æ–±—â–µ–Ω–∏—è + –æ–Ω–ª–∞–π–Ω-—Ç—Ä–µ–∫–∏–Ω–≥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ConferenceService        # –ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ (in-memory, –¥–æ 10 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ JwtService               # JWT —Å role claim
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ KeyBundleService         # E2E –∫–ª—é—á–∏ (X3DH)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NewsService              # –ù–æ–≤–æ—Å—Ç–∏ + –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RoomService              # –ö–æ–º–Ω–∞—Ç—ã + —É—á–∞—Å—Ç–Ω–∏–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SchedulerService         # –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TaskService              # –ó–∞–¥–∞—á–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WebPushService           # Web Push (RFC 8291 + VAPID RFC 8292)
‚îÇ   ‚îú‚îÄ‚îÄ entity/                  # 12 JPA-—Å—É—â–Ω–æ—Å—Ç–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserEntity               # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (username, password, role, profile fields)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MessageEntity            # –°–æ–æ–±—â–µ–Ω–∏–µ (E2E + groupEncrypted + voice + video)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RoomEntity               # –ö–æ–º–Ω–∞—Ç–∞ (GENERAL / PRIVATE / ROOM) + description, avatarUrl
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ KeyBundleEntity          # –ö–ª—é—á–µ–≤–æ–π –±–∞–Ω–¥–ª (X3DH)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ OneTimePreKeyEntity      # –û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ –ø—Ä–µ-–∫–ª—é—á–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CallLogEntity            # –õ–æ–≥ –∑–≤–æ–Ω–∫–æ–≤ (caller, callee, type, status, duration)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PushSubscriptionEntity   # Web Push –ø–æ–¥–ø–∏—Å–∫–∏ (endpoint, p256dh, auth)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ContactEntity            # –ö–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (owner ‚Üí contact)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BlockedUserEntity        # –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (blocker ‚Üí blocked)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NewsEntity               # –ù–æ–≤–æ—Å—Ç—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NewsCommentEntity        # –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –Ω–æ–≤–æ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TaskEntity               # –ó–∞–¥–∞—á–∞
‚îÇ   ‚îú‚îÄ‚îÄ config/                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SecurityConfig           # JWT-—Ñ–∏–ª—å—Ç—Ä, CORS, rate-limit, RBAC
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WebSocketConfig          # WebSocket handshake
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GlobalExceptionHandler   # –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AdminUserInitializer     # –°–æ–∑–¥–∞–Ω–∏–µ admin-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ dto/                     # 8 DTO
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminStatsDto, AuthResponse, MessageDto, NewsCommentDto
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NewsDto, RoomDto, TaskDto, UserDto
‚îÇ   ‚îî‚îÄ‚îÄ resources/
‚îÇ       ‚îú‚îÄ‚îÄ application.yml          # –ö–æ–Ω—Ñ–∏–≥ (TURN secret, JWT, DB, VAPID)
‚îÇ       ‚îî‚îÄ‚îÄ db/migration/        # Flyway (V1‚ÄìV15)
‚îú‚îÄ‚îÄ frontend/                    # React 19.2 + Vite 7.3 + VitePWA
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/          # 34 React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminPanel           # –î–∞—à–±–æ—Ä–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CallScreen           # UI –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Chat                 # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —á–∞—Ç–∞ + WebSocket + GroupE2E
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatRoom             # –õ–µ–Ω—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π + –≤–≤–æ–¥
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ConferenceScreen     # UI –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ (multi-party video/audio)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EditProfilePage      # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GroupInfoPanel       # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä—É–ø–ø–æ–≤–æ–º —á–∞—Ç–µ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ IncomingCallModal    # –ú–æ–¥–∞–ª –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–≤–æ–Ω–∫–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MyProfilePage        # –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserProfilePage      # –ü—Ä–æ—Ñ–∏–ª—å –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecentCalls          # –°–ø–∏—Å–æ–∫ –Ω–µ–¥–∞–≤–Ω–∏—Ö –∑–≤–æ–Ω–∫–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Sidebar              # –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å + —Ç–∞–±—ã + –∫–æ–Ω—Ç–∞–∫—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Login                # –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ / —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProfileModal         # –ü—Ä–æ—Ñ–∏–ª—å + –∞–≤–∞—Ç–∞—Ä
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SecurityCodeModal    # –ö–æ–¥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ E2E
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ VoiceRecorder        # –ó–∞–ø–∏—Å—å –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ VoiceMessage         # –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤—ã—Ö
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ VideoCircleRecorder  # –ó–∞–ø–∏—Å—å –≤–∏–¥–µ–æ-–∫—Ä—É–∂–∫–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ VideoCircleMessage   # –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–∏–¥–µ–æ-–∫—Ä—É–∂–∫–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EmojiPicker          # –í—ã–±–æ—Ä —ç–º–æ–¥–∑–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MentionDropdown      # –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AddMembersPanel      # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ –∫–æ–º–Ω–∞—Ç—É
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NewsBoard / NewsCard # –ù–æ–≤–æ—Å—Ç–Ω–∞—è –ª–µ–Ω—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TaskPanel            # –ö–∞–Ω–±–∞–Ω-–¥–æ—Å–∫–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...                  # ConfirmModal, Toast, CreateRoom, JoinRoom, UserSearch, ...
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ crypto/              # 9 –º–æ–¥—É–ª–µ–π E2E-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ X3DH.js              # Key Agreement
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DoubleRatchet.js     # Forward Secrecy
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ E2EManager.js        # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä (–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª—é—á–µ–π + —Ñ–∞–π–ª—ã)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ KeyManager.js        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞–º–∏ (retry, sync)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CryptoStore.js       # IndexedDB v4 (–∫–ª—é—á–∏ + sentMessages + groupKeys + conferenceKeys)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CallCrypto.js        # E2E –º–µ–¥–∏–∞-—Ñ—Ä–µ–π–º–æ–≤ (AES-128-GCM, Insertable Streams)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ConferenceCrypto.js  # E2E –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–π (pairwise –∫–ª—é—á–∏)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GroupCrypto.js       # E2E –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤ (shared AES-256-GCM per room)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils.js             # Web Crypto API —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/               # 4 React-—Ö—É–∫–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useWebRTC.js         # WebRTC –∑–≤–æ–Ω–∫–∏ + E2E —Å–∏–≥–Ω–∞–ª–∏–Ω–≥ + E2E –º–µ–¥–∏–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useConference.js     # –ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ (mesh WebRTC, –¥–æ 10 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useDecryptedUrl.js   # –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useMediaPermissions.js # –ó–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –∫–∞–º–µ—Ä—ã/–º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/               # 4 —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ appSettings.js       # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ clipboard.js         # –ë—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ formatDuration.js    # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ pushManager.js       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Push-–ø–æ–¥–ø–∏—Å–∫–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile               # Multi-stage ‚Üí nginx:alpine
‚îÇ   ‚îú‚îÄ‚îÄ nginx.conf               # Reverse proxy (HTTP)
‚îÇ   ‚îî‚îÄ‚îÄ nginx-ssl.conf           # Reverse proxy (HTTPS + TLS)
‚îú‚îÄ‚îÄ docker-compose.yml           # Dev: PostgreSQL + Backend + Frontend
‚îú‚îÄ‚îÄ docker-compose.prod.yml      # Prod: + HTTPS + certbot
‚îî‚îÄ‚îÄ .env.example
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# 1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å: JWT_SECRET, DB_PASSWORD

# 2. –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
docker compose up -d --build

# 3. –û—Ç–∫—Ä—ã—Ç—å http://localhost
```

### Production (HTTPS)

```bash
# 1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env (—É–∫–∞–∑–∞—Ç—å DOMAIN –∏ CERTBOT_EMAIL)
# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å production-–æ–≤–µ—Ä–ª–µ–µ–º
docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d --build

# 3. –ü–æ–ª—É—á–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)
docker compose -f docker-compose.yml -f docker-compose.prod.yml run --rm certbot \
  certonly --webroot -w /var/www/certbot -d yourdomain.com

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å frontend –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
docker compose -f docker-compose.yml -f docker-compose.prod.yml restart frontend
```

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–±–µ–∑ Docker)

```bash
# PostgreSQL (—á–µ—Ä–µ–∑ Docker –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ)
docker compose up -d postgres
# –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å –ë–î: barsikdb, user: barsik, password: barsik

# Backend (Java 21 required)
cd backend
mvn spring-boot:run
# ‚Üí http://localhost:9001

# Frontend
cd frontend
npm install
npm run dev
# ‚Üí http://localhost:5173 (proxy ‚Üí backend)
```

---

## üê≥ Docker-—Å–µ—Ä–≤–∏—Å—ã

| –°–µ—Ä–≤–∏—Å | –û–±—Ä–∞–∑ | –ü–æ—Ä—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –†–µ—Å—É—Ä—Å—ã |
|---|---|---|---|---|
| `postgres` | postgres:16-alpine | 5432 (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π) | PostgreSQL —Å healthcheck | 512M / 1 CPU |
| `backend` | eclipse-temurin:21-jre-alpine | 9001 (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π) | Spring Boot API + WebSocket | 768M / 2 CPU |
| `frontend` | nginx:alpine | 80, 443 | React SPA + reverse proxy | 128M / 0.5 CPU |
| `certbot` | certbot/certbot | ‚Äî | Let's Encrypt –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ | –¢–æ–ª—å–∫–æ prod |

```bash
# –õ–æ–≥–∏
docker compose logs -f backend

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
docker compose restart backend

# –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å (—Å —É–¥–∞–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö)
docker compose down -v
```

---

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### Backend

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| `JWT_SECRET` | *(–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)* | –ö–ª—é—á –ø–æ–¥–ø–∏—Å–∏ JWT (–º–∏–Ω. 32 —Å–∏–º–≤–æ–ª–∞) |
| `JWT_EXPIRATION` | `86400000` | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ç–æ–∫–µ–Ω–∞, –º—Å (24—á) |
| `SERVER_PORT` | `9001` | –ü–æ—Ä—Ç backend |
| `DB_HOST` | `localhost` | –•–æ—Å—Ç PostgreSQL (`barsik-db` –≤ Docker) |
| `DB_PORT` | `5432` | –ü–æ—Ä—Ç PostgreSQL |
| `DB_NAME` | `barsikdb` | –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö |
| `DB_USER` | `barsik` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ë–î |
| `DB_PASSWORD` | `barsik` | –ü–∞—Ä–æ–ª—å –ë–î |
| `MAX_FILE_SIZE` | `100MB` | –ú–∞–∫—Å. —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ |
| `UPLOAD_DIR` | `/app/uploads` | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∑–æ–∫ |
| `CORS_ORIGINS` | `http://localhost:*` | –†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ CORS-–∏—Å—Ç–æ—á–Ω–∏–∫–∏ |
| `DDL_AUTO` | `validate` | Hibernate DDL (`update` / `validate`) |
| `HIKARI_MAX_POOL` | `10` | –ú–∞–∫—Å. —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –≤ –ø—É–ª–µ |
| `LOG_LEVEL` | `INFO` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è |
| `TURN_SECRET` | *(–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤)* | HMAC-—Å–µ–∫—Ä–µ—Ç –¥–ª—è coturn (TURN REST API) |
| `VAPID_PUBLIC_KEY` | *(–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è push)* | VAPID public key (Web Push) |
| `VAPID_PRIVATE_KEY` | *(–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è push)* | VAPID private key (Web Push) |

### Production (HTTPS)

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|
| `DOMAIN` | –î–æ–º–µ–Ω –¥–ª—è SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ |
| `CERTBOT_EMAIL` | Email –¥–ª—è Let's Encrypt |

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**Flyway** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏:

| –ú–∏–≥—Ä–∞—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|
| `V1__init_schema.sql` | users, messages, rooms, room_members, news, tasks |
| `V2__create_key_bundles.sql` | key_bundles + one_time_pre_keys (E2E) |
| `V3__add_encryption_fields.sql` | –ü–æ–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –≤ messages (9 –∫–æ–ª–æ–Ω–æ–∫) |
| `V4__add_reply_and_mentions.sql` | –û—Ç–≤–µ—Ç—ã (reply_to) + —É–ø–æ–º–∏–Ω–∞–Ω–∏—è (mentions JSON) |
| `V5__add_user_role.sql` | –ö–æ–ª–æ–Ω–∫–∞ role –≤ app_users (USER / ADMIN) |
| `V6__add_last_seen.sql` | Last seen timestamp |
| `V7__add_voice_fields.sql` | –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (duration, waveform) |
| `V8__add_video_circle_fields.sql` | –í–∏–¥–µ–æ-–∫—Ä—É–∂–∫–∏ (thumbnailUrl, duration) |
| `V9__add_avatar_url.sql` | –ê–≤–∞—Ç–∞—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| `V10__add_group_encrypted.sql` | –§–ª–∞–≥ groupEncrypted –¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö E2E |
| `V11__add_profile_fields.sql` | –ü—Ä–æ—Ñ–∏–ª—å: phone, bio, birthday, first_name, last_name, profile_color |
| `V12__create_call_logs.sql` | –¢–∞–±–ª–∏—Ü–∞ call_logs (caller, callee, type, status, duration) |
| `V13__add_room_description_avatar.sql` | –û–ø–∏—Å–∞–Ω–∏–µ –∏ –∞–≤–∞—Ç–∞—Ä –¥–ª—è –∫–æ–º–Ω–∞—Ç |
| `V14__push_subscriptions.sql` | –¢–∞–±–ª–∏—Ü–∞ push_subscriptions (Web Push VAPID) |
| `V15__contacts_and_blocks.sql` | –¢–∞–±–ª–∏—Ü—ã user_contacts –∏ blocked_users |

---

## üîå API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`/api/auth`)
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| POST | `/register` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç token + username + role) |
| POST | `/login` | –í—Ö–æ–¥ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç token + username + role) |

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ (`/api/admin`) üîí ADMIN
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| GET | `/stats` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã |

### –ö–æ–º–Ω–∞—Ç—ã (`/api/rooms`)
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| GET | `/` | –ú–æ–∏ –∫–æ–º–Ω–∞—Ç—ã |
| POST | `/private/{username}` | –°–æ–∑–¥–∞—Ç—å / –ø–æ–ª—É—á–∏—Ç—å –ª–∏—á–Ω—ã–π —á–∞—Ç |
| POST | `/create` | –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É |
| POST | `/join/{roomId}` | –í–æ–π—Ç–∏ –≤ –∫–æ–º–Ω–∞—Ç—É |
| GET | `/{roomId}` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–Ω–∞—Ç–µ |
| GET | `/{roomId}/history` | –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π) |
| DELETE | `/{roomId}` | –£–¥–∞–ª–∏—Ç—å –∫–æ–º–Ω–∞—Ç—É (–≤–ª–∞–¥–µ–ª–µ—Ü) |

### E2E –∫–ª—é—á–∏ ‚Äî Signal Protocol (`/api/keys`)
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| POST | `/bundle` | –ó–∞–≥—Ä—É–∑–∏—Ç—å Key Bundle |
| GET | `/bundle/{username}` | –ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á–∏ (–ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç 1 OTK) |
| POST | `/replenish` | –ü–æ–ø–æ–ª–Ω–∏—Ç—å One-Time Pre-Keys |
| GET | `/count` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è OTK |
| GET | `/identity/me` | –°–≤–æ–π identity key (–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è) |
| GET | `/identity/{username}` | Identity key –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| GET | `/has-bundle/{username}` | –ï—Å—Ç—å –ª–∏ E2E —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

### –ü—Ä–æ—Ñ–∏–ª—å (`/api/profile`)
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| GET | `/me` | –ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å |
| PUT | `/me` | –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å (firstName, lastName, phone, bio, birthday, profileColor) |
| POST | `/me/avatar` | –ó–∞–≥—Ä—É–∑–∏—Ç—å –∞–≤–∞—Ç–∞—Ä (–º–∞–∫—Å. 5 –ú–ë, jpg/png/gif/webp) |
| DELETE | `/me/avatar` | –£–¥–∞–ª–∏—Ç—å –∞–≤–∞—Ç–∞—Ä |
| GET | `/{username}` | –ü—Ä–æ—Ñ–∏–ª—å –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (isContact, isBlockedByMe) |

### –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| GET | `/api/contacts` | –ú–æ–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã (—Å avatarUrl, firstName, lastName) |
| POST | `/api/contacts/{username}` | –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω—Ç–∞–∫—Ç—ã |
| DELETE | `/api/contacts/{username}` | –£–¥–∞–ª–∏—Ç—å –∏–∑ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ |
| GET | `/api/blocks` | –°–ø–∏—Å–æ–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö |
| POST | `/api/blocks/{username}` | –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| DELETE | `/api/blocks/{username}` | –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

### –ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ (`/api/conference`)
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| POST | `/` | –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—é |
| POST | `/{confId}/join` | –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è (–º–∞–∫—Å. 10 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤) |
| POST | `/{confId}/leave` | –ü–æ–∫–∏–Ω—É—Ç—å –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—é |
| GET | `/{confId}` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ |

### –ß–∞—Ç
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| WS | `/ws/chat?token=JWT` | WebSocket-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ |
| GET | `/api/chat/users` | –°–ø–∏—Å–æ–∫ –æ–Ω–ª–∞–π–Ω-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–ø–æ–∏—Å–∫) |
| GET | `/api/chat/all-users` | –í—Å–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ |

### –§–∞–π–ª—ã
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| POST | `/api/upload` | –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª (–¥–æ 100 –ú–ë) |
| GET | `/api/uploads/{filename}` | –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª |

### –ò—Å—Ç–æ—Ä–∏—è –∑–≤–æ–Ω–∫–æ–≤ (`/api/calls`)
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| GET | `/history` | –ò—Å—Ç–æ—Ä–∏—è –∑–≤–æ–Ω–∫–æ–≤ (–ª–∏–º–∏—Ç, –º–∞–∫—Å. 200) |

### Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (`/api/push`)
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| GET | `/vapid-key` | VAPID public key –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ |
| POST | `/subscribe` | –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| POST | `/unsubscribe` | –û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π |

### –ù–æ–≤–æ—Å—Ç–∏ (`/api/news`)
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| GET | `/` | –í—Å–µ –Ω–æ–≤–æ—Å—Ç–∏ |
| POST | `/` | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å |
| POST | `/{id}/comments` | –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
| GET | `/{id}/comments` | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –Ω–æ–≤–æ—Å—Ç–∏ |

### –ó–∞–¥–∞—á–∏ (`/api/tasks`)
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| GET | `/` | –í—Å–µ –∑–∞–¥–∞—á–∏ |
| POST | `/` | –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É |
| PUT | `/{id}` | –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞—á—É |
| DELETE | `/{id}` | –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É |

### WebRTC (`/api/webrtc`)
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| GET | `/ice-config` | ICE-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (STUN + TURN —Å HMAC credentials) |

### –ê–≤–∞—Ç–∞—Ä—ã
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| POST | `/api/avatar/upload` | –ó–∞–≥—Ä—É–∑–∏—Ç—å –∞–≤–∞—Ç–∞—Ä |
| GET | `/api/uploads/avatars/{filename}` | –ü–æ–ª—É—á–∏—Ç—å –∞–≤–∞—Ç–∞—Ä |

### WebSocket-—Å–æ–æ–±—â–µ–Ω–∏—è (JSON)

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|
| **–ß–∞—Ç** | |
| `CHAT` | –¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ |
| `EDIT` | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è |
| `DELETE` | –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è |
| `SCHEDULED` | –û—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ |
| `TYPING` | –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞ |
| `READ_RECEIPT` | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–æ—á—Ç–µ–Ω–∏—è |
| `JOIN` / `LEAVE` | –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ / –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ |
| `PRIVATE` | –ü—Ä–∏–≤–∞—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ |
| `STATUS_UPDATE` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ |
| `REPLY_NOTIFICATION` | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Ç–≤–µ—Ç–µ |
| `MENTION_NOTIFICATION` | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É–ø–æ–º–∏–Ω–∞–Ω–∏–∏ |
| **–ú–µ–¥–∏–∞** | |
| `VOICE` | –ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (—Å E2E) |
| `VIDEO_CIRCLE` | –í–∏–¥–µ–æ-–∫—Ä—É–∂–æ–∫ (—Å E2E) |
| `AVATAR_UPDATE` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞ |
| **–ó–≤–æ–Ω–∫–∏ 1-–Ω–∞-1** | |
| `CALL_OFFER` | SDP-–æ—Ñ—Ñ–µ—Ä –∑–≤–æ–Ω–∫–∞ (E2E-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∏–Ω–≥–∞) |
| `CALL_ANSWER` | SDP-–æ—Ç–≤–µ—Ç –Ω–∞ –∑–≤–æ–Ω–æ–∫ (E2E-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∏–Ω–≥–∞) |
| `CALL_REJECT` / `CALL_END` / `CALL_BUSY` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–æ–º |
| `ICE_CANDIDATE` | ICE-–∫–∞–Ω–¥–∏–¥–∞—Ç (E2E-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ) |
| `CALL_LOG` | –ó–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é –∑–≤–æ–Ω–∫–æ–≤ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —á–∞—Ç–µ) |
| **–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏** | |
| `CONF_JOIN` | –£—á–∞—Å—Ç–Ω–∏–∫ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è ‚Üí broadcast |
| `CONF_LEAVE` | –£—á–∞—Å—Ç–Ω–∏–∫ –≤—ã—à–µ–ª ‚Üí broadcast |
| `CONF_PEERS` | –°–µ—Ä–≤–µ—Ä ‚Üí –Ω–æ–≤—ã–π —É—á–∞—Å—Ç–Ω–∏–∫: —Å–ø–∏—Å–æ–∫ peers |
| `CONF_OFFER` | SDP offer –º–µ–∂–¥—É —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ |
| `CONF_ANSWER` | SDP answer –º–µ–∂–¥—É —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ |
| `CONF_ICE` | ICE candidate –º–µ–∂–¥—É —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ |
| **E2E / –ì—Ä—É–ø–ø—ã** | |
| `GROUP_KEY` | –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ –∫–ª—é—á–∞ (E2E —á–µ—Ä–µ–∑ Double Ratchet) |
| `GROUP_INVITE` / `GROUP_INVITE_ACCEPT` | –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É |
| **–ó–∞–¥–∞—á–∏** | |
| `TASK_CREATED` / `TASK_COMPLETED` / `TASK_OVERDUE` | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–¥–∞—á–∞—Ö |
| **–°–∏—Å—Ç–µ–º–∞** | |
| `ERROR` | –û—à–∏–±–∫–∞ (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏ —Ç.–¥.) |

---

## üß™ –¢–µ—Å—Ç—ã

### Backend ‚Äî 246 unit-—Ç–µ—Å—Ç–æ–≤ (22 test-–∫–ª–∞—Å—Å–∞)

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–ª–∞—Å—Å | –¢–µ—Å—Ç–æ–≤ |
|---|---|---|
| **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã** | AdminControllerTest | 2 |
| | AuthControllerTest | 10 |
| | ChatWebSocketHandlerTest | 64 |
| | FileControllerTest | 12 |
| | KeyBundleControllerTest | 14 |
| | NewsControllerTest | 5 |
| | RoomControllerTest | 17 |
| | TaskControllerTest | 13 |
| | WebRtcControllerTest | 3 |
| **–°–µ—Ä–≤–∏—Å—ã** | AdminServiceTest | 4 |
| | ChatServiceTest | 26 |
| | JwtServiceTest | 9 |
| | KeyBundleServiceTest | 21 |
| | LastSeenTest | 8 |
| | NewsServiceTest | 7 |
| | RoomServiceTest | 16 |
| | SchedulerServiceTest | 6 |
| | TaskServiceTest | 9 |
| **E2E / –ü–æ–ª—è** | E2EFieldPropagationTest | 18 |
| **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** | WebSocketConfigTest | 3 |
| **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ** | IntegrationTest (H2) | 6 |
| | SecurityIntegrationTest (H2) | 16 |

```bash
cd backend && mvn test
```

### Frontend ‚Äî 327 —Ç–µ—Å—Ç–æ–≤ (23 test-—Ñ–∞–π–ª–∞)

| –§–∞–π–ª | –¢–µ—Å—Ç–æ–≤ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| **–ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è** | | |
| utils.test.js | 36 | –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —É—Ç–∏–ª–∏—Ç—ã (ECDH, ECDSA, AES-GCM, HKDF) |
| SecurityCodeDiagnostic.test.js | 30 | –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–æ–¥–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (A‚ÄìJ —Å—Ü–µ–Ω–∞—Ä–∏–∏) |
| CallCrypto.test.js | 20 | E2E –º–µ–¥–∏–∞-—Ñ—Ä–µ–π–º–æ–≤ (AES-128-GCM, Insertable Streams) |
| GroupCrypto.test.js | 22 | E2E –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤ (shared AES-256-GCM) |
| CryptoStoreV3.test.js | 15 | IndexedDB v3 (sentMessages + groupKeys) |
| CryptoStoreV4.test.js | 12 | IndexedDB v4 (conferenceKeys) |
| DoubleRatchet.test.js | 11 | Double Ratchet –ø—Ä–æ—Ç–æ–∫–æ–ª |
| E2ESecurityCode.test.js | 9 | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è Safety Number |
| X3DH.test.js | 6 | Extended Triple Diffie-Hellman |
| **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** | | |
| VideoCircleMessage.test.jsx | 27 | –í–∏–¥–µ–æ-–∫—Ä—É–∂–∫–∏ ‚Äî –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ |
| VoiceMessage.test.jsx | 26 | –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è ‚Äî –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ |
| SidebarLogic.test.js | 26 | –õ–æ–≥–∏–∫–∞ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏ |
| VideoCircleRecorder.test.jsx | 21 | –í–∏–¥–µ–æ-–∫—Ä—É–∂–∫–∏ ‚Äî –∑–∞–ø–∏—Å—å |
| CallScreen.test.jsx | 18 | UI –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞ |
| SecurityCodeModal.test.jsx | 16 | UI –∫–æ–¥–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ |
| VoiceRecorder.test.jsx | 14 | –ì–æ–ª–æ—Å–æ–≤—ã–µ ‚Äî –∑–∞–ø–∏—Å—å |
| IncomingCallModal.test.jsx | 10 | –ú–æ–¥–∞–ª –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–≤–æ–Ω–∫–∞ |
| DeleteModal.test.js | 9 | –ú–æ–¥–∞–ª —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π |
| MessageNotificationPopup.test.jsx | 8 | Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| SidebarMenu.test.jsx | 6 | –ú–µ–Ω—é –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏ |
| **–•—É–∫–∏** | | |
| useDecryptedUrl.test.js | 11 | –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ (fetch ‚Üí decrypt ‚Üí blob) |
| useMediaPermissions.test.js | 8 | –ó–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –º–µ–¥–∏–∞ |

```bash
cd frontend && npx vitest run
```

---

## üõ†Ô∏è –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

### Backend
- **Java 21** + **Spring Boot 3.3.5**
- Spring Security + JWT (HMAC-SHA256) + RBAC
- Spring WebSocket (TextWebSocketHandler)
- Spring Data JPA + Hibernate
- PostgreSQL 16 + Flyway (15 –º–∏–≥—Ä–∞—Ü–∏–π)
- BCrypt (password hashing)
- JJWT 0.11.5
- HMAC-SHA1 (TURN ephemeral credentials)
- Web Push (RFC 8291 + VAPID RFC 8292, —á–∏—Å—Ç–∞—è Java 21)

### Frontend
- **React 19.2** + **Vite 7.3** + **VitePWA**
- **Vitest 4.0** + Testing Library
- Web Crypto API (ECDH, ECDSA, AES-GCM, HKDF, HMAC)
- WebRTC (RTCPeerConnection, Insertable Streams)
- IndexedDB v4 (—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–ª—é—á–µ–π E2E + sentMessages + groupKeys + conferenceKeys)
- Web Push API (VAPID, Service Worker)
- CSS (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω, —Ç—ë–º–Ω–∞—è —Ç–µ–º–∞)

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **Docker** + Docker Compose (4 —Å–µ—Ä–≤–∏—Å–∞)
- **nginx** (reverse proxy + TLS termination)
- **Let's Encrypt** (certbot, –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- **coturn** (TURN-—Å–µ—Ä–≤–µ—Ä –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º VPS, HMAC-SHA1 auth)
- Flyway (–º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î)
- GitHub (CI-ready)

---

## üìê –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Telegram

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | BarsikChat | Telegram |
|---|---|---|
| –ü—Ä–æ—Ç–æ–∫–æ–ª E2E | ‚úÖ Signal (X3DH + Double Ratchet) | ‚ö†Ô∏è MTProto 2.0 (–∫–∞—Å—Ç–æ–º–Ω—ã–π) |
| E2E –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | ‚úÖ –ê–≤—Ç–æ –≤ –ª–∏—á–Ω—ã—Ö | ‚ùå –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ |
| E2E –≥—Ä—É–ø–ø—ã | ‚úÖ Shared AES-256-GCM key | ‚ùå –ù–µ—Ç |
| E2E –∑–≤–æ–Ω–∫–∏ (–º–µ–¥–∏–∞) | ‚úÖ AES-128-GCM per-frame | ‚úÖ –ï—Å—Ç—å |
| E2E –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ | ‚úÖ Pairwise AES-128-GCM | ‚úÖ –ï—Å—Ç—å |
| E2E –∑–≤–æ–Ω–∫–∏ (—Å–∏–≥–Ω–∞–ª–∏–Ω–≥) | ‚úÖ Double Ratchet | ‚ö†Ô∏è MTProto |
| Forward Secrecy | ‚úÖ Per-message | ‚ö†Ô∏è Per-session |
| –®–∏—Ñ—Ä | ‚úÖ AES-256-GCM (AEAD) | ‚ö†Ô∏è AES-256-IGE |
| TLS | ‚úÖ 1.2/1.3 —Å—Ç–∞–Ω–¥–∞—Ä—Ç | –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç |
| –°–µ—Ä–≤–µ—Ä –≤–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏—è | ‚ùå –ù–µ—Ç | ‚úÖ Cloud Chats |
| –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª—é—á–µ–π | ‚úÖ Safety Number | ‚úÖ Fingerprint |
| Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | ‚úÖ Web Push (VAPID) | ‚úÖ FCM / APNs |
| –ö–æ–Ω—Ç–∞–∫—Ç—ã | ‚úÖ –ï—Å—Ç—å | ‚úÖ –ï—Å—Ç—å |
| –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ | ‚úÖ –ï—Å—Ç—å (—Å–æ–æ–±—â–µ–Ω–∏—è + –∑–≤–æ–Ω–∫–∏) | ‚úÖ –ï—Å—Ç—å |
| –ü—Ä–æ—Ñ–∏–ª–∏ | ‚úÖ –ï—Å—Ç—å (bio, phone, avatar, color) | ‚úÖ –ï—Å—Ç—å |
| –ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ | ‚úÖ –î–æ 10 (mesh WebRTC) | ‚úÖ –î–æ 1000 |
| TURN credentials | ‚úÖ HMAC ephemeral (24h TTL) | –ü—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω—ã–π |
| –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å | ‚úÖ USER / ADMIN | ‚úÖ –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è |

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---|---|
| Backend –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ | 15 |
| Backend —Å–µ—Ä–≤–∏—Å–æ–≤ | 10 |
| JPA-—Å—É—â–Ω–æ—Å—Ç–µ–π | 12 |
| Flyway-–º–∏–≥—Ä–∞—Ü–∏–π | 15 |
| DTO-–∫–ª–∞—Å—Å–æ–≤ | 8 |
| Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ | 34 |
| Crypto-–º–æ–¥—É–ª–µ–π | 9 |
| React-—Ö—É–∫–æ–≤ | 4 |
| –£—Ç–∏–ª–∏—Ç | 4 |
| Backend —Ç–µ—Å—Ç–æ–≤ | 246 |
| Frontend —Ç–µ—Å—Ç–æ–≤ | 327 |
| **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤** | **573** |
| **–¢–µ—Å—Ç-—Ñ–∞–π–ª–æ–≤** | **45** |
| WebSocket —Ç–∏–ø–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π | 35 |

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
